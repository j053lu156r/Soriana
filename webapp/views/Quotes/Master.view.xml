<mvc:View displayBlock="true"
    xmlns:f="sap.f"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:vm="sap.ui.comp.variants"
    xmlns:unified="sap.ui.unified"
    xmlns="sap.m"
    xmlns:core="sap.ui.core" controllerName="demo.controllers.Quotes.Master" height="100%">
    <f:DynamicPage class="sapUiContentPadding">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle backgroundDesign="Transparent">
                <f:heading>
                    <vm:VariantManagement standardItemText="{appTxts>/quotes.quotes}">
                    </vm:VariantManagement>
                </f:heading>
                <!-- <f:actions>
                    <ToolbarSpacer/>
                    <Button text="{appTxts>/quotes.uploadQuote}" type="Emphasized" press="openUploadDialog"/>
                </f:actions> -->
                <f:actions>
                    <ToolbarSpacer/>
                    <Button text="{appTxts>/quotes.createQuote}" type="Emphasized" press=".createQuote('N')"/>
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <fb:FilterBar id="filterBar" header="Header" reset="onReset" search="searchData" clear="clearFilters" cancel="onCancel" 
		                filtersDialogClosed = "onFiltersDialogClosed" showRestoreButton="false" showClearButton="false" useToolbar="false">

                        <fb:filterGroupItems>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="Ab" label="{appTxts>/quotes.supplier}" mandatory="true" partOfCurrentVariant="true" visibleInFilterBar="true">
                                <fb:control>
                                    <Input id="supplierInput" placeholder="{appTxts>/quotes.supplier}" showSuggestion="true" valueHelpOnly="true" showValueHelp="true" valueHelpRequest=".onValueHelpRequest" value="{configSite>/supplierInput}">
                                    </Input>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem groupName="__$INTERNAL$" groupTitle="Fechas" name="Fecha de entrega" label="{appTxts>/quotes.quoteDate}" mandatory="true" partOfCurrentVariant="true" visibleInFilterBar="true">
                                <fb:control>
                                    <DateRangeSelection id="quotedateRange" required="true"/>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="A" label="{appTxts>/quotes.quoteFolioIni}" mandatory="false" partOfCurrentVariant="true" visibleInFilterBar="true">
                                <fb:control>
                                    <Input id="quoteFolioIniInput" placeholder="{appTxts>/quotes.quoteFolioIni}" showSuggestion="true">
                                    </Input>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="b" label="{appTxts>/quotes.quoteFolioFin}" mandatory="false" partOfCurrentVariant="true" visibleInFilterBar="true">
                                <fb:control>
                                    <Input id="quoteFolioFinInput" placeholder="{appTxts>/quotes.quoteFolioFin}" showSuggestion="true">
                                    </Input>
                                </fb:control>
                            </fb:FilterGroupItem>

                          
                        </fb:filterGroupItems>
                    </fb:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <VBox>
              
                <Table sticky="HeaderToolbar,InfoToolbar,ColumnHeaders" noDataText="{appTxts>/quotes.noData}" autoPopinMode="true" fixedLayout="false" growing="true" visible="{= ${quoteConfigModel>/spc1Visible} !== 'Calendar' }" id="tableQuotes" mode="None" alternateRowColors="true" items="{path: 'tableQuotesModel>/CTCITASCAB/Paginated/results', sorter : { path : 'ZfolioCita', descending : true }}">
                    <headerToolbar>
                        <OverflowToolbar>
                            <Title text="{appTxts>/quotes.quotes} ({tableQuotesModel>/CTCITASCAB/results/length})" />
                            <ToolbarSpacer/>
                            <!--<Button icon="sap-icon://excel-attachment" text="{appTxts>/global.export}" press=".buildExportTable" visible="{= ${tableQuotesModel>/CTCITASCAB/results/length} > 0}" />-->
                            <Select visible="{= ${tableQuotesModel>/CTCITASCAB/Paginated/results/length} > 0 }" change=".paginateValue(${$parameters>/selectedItem}, 'tableQuotesModel', '/CTCITASCAB')">
                                <items>
                                    <core:Item key="10" text="10"/>
                                    <core:Item key="20" text="20"/>
                                    <core:Item key="50" text="50"/>
                                    <core:Item key="100" text="100"/>
                                </items>
                            </Select>
                        </OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Phone" mergeDuplicates="false">
                            <header>
                                <Text text="{appTxts>/quotes.quoteFolio}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                            </header>
                            <footer/>
                        </Column>
                        <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Phone" mergeDuplicates="false">
                            <header>
                                <Text text="{appTxts>/quotes.branch}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                            </header>
                            <footer/>
                        </Column>
                        <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Phone" mergeDuplicates="false">
                            <header>
                                <Text text="{appTxts>/quotes.quoteCreationDate}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                            </header>
                            <footer/>
                        </Column>
                        <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Phone" mergeDuplicates="false">
                            <header>
                                <Text text="{appTxts>/quotes.quoteDate}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                            </header>
                            <footer/>
                        </Column>
                        <Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" mergeDuplicates="false">
                            <header>
                                <Text text="{appTxts>/quotes.supplier}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                            </header>
                            <footer/>
                        </Column>
                        <!-- <Column width="auto" vAlign="Top" minScreenWidth="Tablet" mergeDuplicates="false">
						<header>
							<Text text="{appTxts>/quotes.productType}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
						</header>
						<footer/>
					</Column>  -->
                        <Column width="auto" vAlign="Top" minScreenWidth="Tablet" mergeDuplicates="false">
                            <header>
                                <Text text="{appTxts>/quotes.quoteType}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                            </header>
                            <footer/>
                        </Column>
                        <Column width="auto" vAlign="Top" minScreenWidth="Tablet" mergeDuplicates="false">
                            <header>
                                <Text text="{appTxts>/quotes.unitType}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                            </header>
                            <footer/>
                        </Column>
                           <Column width="auto" vAlign="Top" minScreenWidth="Tablet" mergeDuplicates="false">
                            <header>
                                <Text text="Estado" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                            </header>
                            <footer/>
                        </Column>
                            <Column width="auto" vAlign="Top" minScreenWidth="Tablet" mergeDuplicates="false">
                            <header>
                                <Text text="" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                            </header>
                            <footer/>
                        </Column>
                        
                        <!-- <Column width="auto" vAlign="Top" minScreenWidth="Tablet" mergeDuplicates="false">
						<header>
							<Text text="{appTxts>/quotes.packageBoxes}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
						</header>
						<footer/>
					</Column>
                    <Column width="auto" vAlign="Top" minScreenWidth="Tablet" mergeDuplicates="false">
						<header>
							<Text text="{appTxts>/quotes.pallets}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
						</header>
						<footer/>
					</Column>
                    <Column width="auto" vAlign="Top" minScreenWidth="Tablet" mergeDuplicates="false">
						<header>
							<Text text="{appTxts>/quotes.carrier}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
						</header>
						<footer/>
					</Column>      -->
                    </columns>
                    <items>
                        <ColumnListItem type="Navigation" press="onListItemPress">
                            <cells>
                                <Text xmlns="sap.m" text="{tableQuotesModel>Folio}"/>
                                <Text xmlns="sap.m" text="{tableQuotesModel>Centro}"/>
                                <Text xmlns="sap.m" text="{tableQuotesModel>Fechareg}"/>
                                <Text xmlns="sap.m" text="{tableQuotesModel>Fechacita}"/>
                                <Text xmlns="sap.m" text="{tableQuotesModel>Proveedor}"/>
                                <Text xmlns="sap.m" text="{path: 'tableQuotesModel>Tipocita', formatter: '.codigotipocita'}"/>
                                <Text xmlns="sap.m" text="{path: 'tableQuotesModel>Tipounidad', formatter: '.codigotipounidad'}"/>
                                <Text xmlns="sap.m" text="{path: 'tableQuotesModel>Zestatus', formatter: '.codigoEstado'}"/>
                                <Button text="Confirmar Cita" press="Confirmacion" visible="{path:'tableQuotesModel>AdminV'}"></Button>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
                <OverflowToolbar visible="{= ${quoteConfigModel>/spc1Visible} !== 'Calendar'}">
                    <Text text="{tableQuotesModel>/CTCITASCAB/Paginated/initRow} - {tableQuotesModel>/CTCITASCAB/Paginated/endRow} {appTxts>/pagination.of} {tableQuotesModel>/CTCITASCAB/results/length}" />
                    <ToolbarSpacer/>
                    <Button type="Default" icon="sap-icon://slim-arrow-left" press=".prevPagination(${tableQuotesModel>/CTCITASCAB/Paginated/iterator}, ${tableQuotesModel>/CTCITASCAB/Paginated/initRow}, 'tableQuotesModel', '/CTCITASCAB')" enabled="{= ${tableQuotesModel>/CTCITASCAB/Paginated/iterator} !== 1}" />
                    <Button type="Default" icon="sap-icon://slim-arrow-right" press=".nextPagination(${tableQuotesModel>/CTCITASCAB/Paginated/iterator}, ${tableQuotesModel>/CTCITASCAB/Paginated/endRow}, 'tableQuotesModel', '/CTCITASCAB')" enabled="{= ${tableQuotesModel>/CTCITASCAB/Paginated/endRow} !== ${tableQuotesModel>/CTCITASCAB/results/length}}" />
                </OverflowToolbar>

                <SinglePlanningCalendar id="SPC1" visible="{= ${quoteConfigModel>/spc1Visible} === 'Calendar' }" class="sapUiSmallMarginTop" title= "{appTxts>/quotes.quotes} ({tableQuotesModel>/CTCITASCAB/results/length})" startDate="{path: 'quoteConfigModel>/startDate'}" appointmentSelect="onAppointmentItemPress" appointments="{path: 'tableQuotesModel>/CTCITASCAB/Paginated/results'}">
                    <views>
                        <SinglePlanningCalendarMonthView key="MonthView" title="Month" />
                    </views>
                    <appointments>
                        <unified:CalendarAppointment title= "{appTxts>/quotes.quoteFolio} - {tableQuotesModel>ZfolioCita}" text= "{tableQuotesModel>ZfolioCita} - {tableQuotesModel>Nlifnr}" startDate= "{ path: 'tableQuotesModel>Zfecharegcita', formatter: '.formatDateQuote'}" endDate= "{ path: 'tableQuotesModel>Zfecharegcita', formatter: '.formatDateQuote'}">
                        </unified:CalendarAppointment>
                    </appointments>
                </SinglePlanningCalendar>
            </VBox>
        </f:content>
    </f:DynamicPage>
</mvc:View>