<mvc:View displayBlock="true" 
        controllerName="demo.controllers.BoletinVta.DetailPolizas" 
        height="100%"
		xmlns="sap.uxap"
		xmlns:mvc="sap.ui.core.mvc"
		xmlns:m="sap.m"
		xmlns:f="sap.f"
		xmlns:form="sap.ui.layout.form">

	<ObjectPageLayout id="ObjectPageLayout"
					showTitleInHeaderContent="true"
					alwaysShowContentHeader="false"
					preserveHeaderStateOnScroll="false"
					headerContentPinnable="true"
					isChildPage="true"
					upperCaseAnchorBar="false">

				<headerTitle>
					<ObjectPageDynamicHeaderTitle>
						<expandedHeading>
							<m:Title text="{appTxts>/polizas.sociedad} {policieDetModel>/company}" wrapping="true" class="sapUiSmallMarginEnd"/>
						</expandedHeading>
						<snappedHeading>
							<m:FlexBox wrap="Wrap" fitContainer="true" alignItems="Center">
								<m:FlexBox wrap="NoWrap" fitContainer="true" alignItems="Center" class="sapUiTinyMarginEnd">
									<f:Avatar src="../../../../../../../{products>ProductPicUrl}" displaySize="S" displayShape="Square" class="sapUiTinyMarginEnd"/>
									<m:Title text="{appTxts>/polizas.docto} {policieDetModel>/document}" wrapping="true" class="sapUiTinyMarginEnd"/>
								</m:FlexBox>
							</m:FlexBox>
						</snappedHeading>
                        <expandedContent>
                            <m:Text text="{appTxts>/polizas.docto} {policieDetModel>/document} / {policieDetModel>/year}"/>
                        </expandedContent>
                        <snappedContent>
                            <m:Text text="{policieDetModel>/year}"/>
                        </snappedContent>
						<navigationActions>
							<m:OverflowToolbarButton type="Transparent" icon="sap-icon://full-screen" press="handleFullScreen" id="enterFullScreenBtn" tooltip="Enter Full Screen Mode" visible="{= ${/actionButtonsInfo/midColumn/fullScreen} !== null }"/>
							<m:OverflowToolbarButton type="Transparent" icon="sap-icon://exit-full-screen" press="handleExitFullScreen" id="exitFullScreenBtn" tooltip="Exit Full Screen Mode" visible="{= ${/actionButtonsInfo/midColumn/exitFullScreen} !== null }"/>
							<m:OverflowToolbarButton type="Transparent" icon="sap-icon://decline" press="handleClose"  tooltip="Close column" visible="{= ${/actionButtonsInfo/midColumn/closeColumn} !== null }"/>
						</navigationActions>
					</ObjectPageDynamicHeaderTitle>
				</headerTitle>
		<sections>

			<ObjectPageSection >
				<subSections>
					<ObjectPageSubSection>
						<blocks>
							<m:Table sticky="HeaderToolbar,InfoToolbar,ColumnHeaders" 
                                    noDataText="{appTxts>/foliosCapDet.noData}" 
                                    id="tablePolizas"
                                    alternateRowColors="true" 
									items="{PolizasHdr>/}">
                                     <m:headerToolbar>
                                        <m:OverflowToolbar>
                                            <m:Title text="{appTxts>/foliosCapDet.titleDet} ({promotionDet>/length})" />
                                            <m:ToolbarSpacer/>
                                            <m:Button icon="sap-icon://excel-attachment" text="{appTxts>/global.export}" 
                                                press=".buildExportTable"
                                                visible="{= ${promotionDet>/length} > 0}"
                                            />
                                            
                                        </m:OverflowToolbar>
                                    </m:headerToolbar>
								<m:columns>
                                <m:Column id="CCentro" width="auto" hAlign="Center" vAlign="Top" minScreenWidth="Phone" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <m:header>
                                        <m:Text id="txtS" text="{appTxts>/polizas.sucursal}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                    </m:header>
                                    <m:footer>
                                        <m:Text id="txtT" text="Total" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                    </m:footer>
                                </m:Column>
                                <m:Column id="CBase" width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Phone" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <m:header>
                                        <m:Text id="txtB" text="{appTxts>/polizas.base}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                    </m:header>
                                    <m:footer>
                                        <m:ObjectNumber id="OBNT"
                                            number="{
                                                parts:[{path:'acuTotDetModel>/TotBase'},{path:'CurrencyCode'}],
                                                type: 'sap.ui.model.type.Currency',
                                                formatOptions: {showMeasure: false}
                                                    }"
                                            unit="MXN" />
                                    </m:footer>
                                </m:Column>
                                <m:Column id="CDesc" width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Phone" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <m:header>
                                        <m:Text id="txtD" text="{appTxts>/polizas.desc}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                    </m:header>
                                    <m:footer>
                                        <m:ObjectNumber id="ONT"
                                            number="{
                                                parts:[{path:'acuTotDetModel>/TotDescto'},{path:'CurrencyCode'}],
                                                type: 'sap.ui.model.type.Currency',
                                                formatOptions: {showMeasure: false}
                                                    }"
                                            unit="MXN" />
                                    </m:footer>
                                </m:Column>
                                <m:Column id="CIva" width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <m:header>
                                        <m:Text id="txtI" text="{appTxts>/polizas.iva}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                    </m:header>
                                    <m:footer>
                                        <m:ObjectNumber id="ONI"
                                            number="{
                                                parts:[{path:'acuTotDetModel>/TotIVA'},{path:'CurrencyCode'}],
                                                type: 'sap.ui.model.type.Currency',
                                                formatOptions: {showMeasure: false}
                                                    }"
                                            unit="MXN" />
                                    </m:footer>
                                </m:Column>
                                <m:Column id="CPDesc" width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                    <m:header>
                                        <m:Text id="txtpd" text="{appTxts>/polizas.pDesc}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                    </m:header>
                                    <m:footer/>
                                </m:Column>
                            </m:columns>
								<m:items>
                                    <m:ColumnListItem id="CItems">                    
                                        <m:cells>
                                            <m:ObjectIdentifier id="OIB"
                                                title="{PolizasHdr>Segment}" 
                                                titleActive="true"/>
                                            <m:ObjectNumber id="ONB"
                                                number="{
                                                    parts:[{path:'PolizasHdr>Dmbtr'},{path:'CurrencyCode'}],
                                                    type: 'sap.ui.model.type.Currency',
                                                    formatOptions: {showMeasure: false}
                                                        }"
                                                unit="MXN" />
                                            <m:ObjectNumber id="OND"
                                                number="{
                                                    parts:[{path:'PolizasHdr>Wrbtr'},{path:'CurrencyCode'}],
                                                    type: 'sap.ui.model.type.Currency',
                                                    formatOptions: {showMeasure: false}
                                                        }"
                                                unit="MXN" />
                                            <m:ObjectNumber id="ONI2"
                                                number="{
                                                    parts:[{path:'PolizasHdr>Wmwst'},{path:'CurrencyCode'}],
                                                    type: 'sap.ui.model.type.Currency',
                                                    formatOptions: {showMeasure: false}
                                                        }"
                                                unit="MXN" />
                                            <m:ObjectNumber id="ONPD"
                                                number="{PolizasHdr>PDesc}"
                                                unit="{PolizasHdr>Waers}"
                                                state="Success" />
                                        </m:cells>
                                    </m:ColumnListItem>
                                </m:items>
							</m:Table>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
		</sections>
	</ObjectPageLayout>
    
</mvc:View>