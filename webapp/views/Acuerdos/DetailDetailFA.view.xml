<mvc:View xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    controllerName="demo.controllers.Acuerdos.DetailDetailFA"
	xmlns="sap.uxap"
	xmlns:layout="sap.ui.layout"
	xmlns:m="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
	height="100%">
	<ObjectPageLayout id="ObjectPageLayout" 
        showTitleInHeaderContent="true" 
        upperCaseAnchorBar="false">
		<headerTitle>
            <ObjectPageDynamicHeaderTitle>
                <expandedHeading>
                    <m:Title text="Tienda: {acuHeadDetDetModel>/Tienda}" wrapping="true"/>
                </expandedHeading>

                <snappedHeading>
                    <m:FlexBox fitContainer="true" alignItems="Center">
                        <m:Title text="Tienda: {acuHeadDetDetModel>/Tienda}" wrapping="true" />
                    </m:FlexBox>
                </snappedHeading>

                <actions>
                    <!--<m:OverflowToolbarButton type="Transparent" icon="sap-icon://full-screen" press="handleFullScreen" id="enterFullScreenBtn" tooltip="Enter Full Screen Mode" visible="{= ${/actionButtonsInfo/endColumn/fullScreen} !== null }"/>
					<m:OverflowToolbarButton type="Transparent" icon="sap-icon://exit-full-screen" press="handleExitFullScreen" id="exitFullScreenBtn" tooltip="Exit Full Screen Mode" visible="{= ${/actionButtonsInfo/endColumn/exitFullScreen} !== null }"/>
					<m:OverflowToolbarButton type="Transparent" icon="sap-icon://decline" press="handleClose"  tooltip="Close end column" visible="{= ${/actionButtonsInfo/endColumn/closeColumn} !== null }"/>-->
                    <m:OverflowToolbarButton type="Transparent" icon="sap-icon://decline" press="handleClose"  tooltip="Close detail page" />
                </actions>
            </ObjectPageDynamicHeaderTitle>
		</headerTitle>

		<headerContent>
            <m:VBox>
                <!--<m:Panel>-->
    			    <m:FlexBox direction="Column" alignItems="Center">
                        <m:Label text="Documento: {acuHeadDetDetModel>/Documento}" design="Bold"/>
			        </m:FlexBox>
                <!--</m:Panel>-->
            </m:VBox>
		</headerContent>

		<sections>
			<ObjectPageSection>
				<subSections>
					<ObjectPageSubSection>
						<blocks>
							<m:VBox>
                                <m:Table 
                                    noDataText="{appTxts>/acuerdos.noData}" 
                                    id="AcuerdosDetDet"
                                    items="{AcuDetDetHdr>/AcuDetDet/Paginated/results}">
                                    <m:headerToolbar>
                                        <m:OverflowToolbar>
                                            <m:Title text="{appTxts>/acuerdos.detDetMov} ({AcuDetDetHdr>/AcuDetDet/results/length})" />
                                            <m:ToolbarSpacer/>
                                            <m:Button icon="sap-icon://excel-attachment" text="{appTxts>/global.export}" 
                                                press=".buildExportTable"
                                                visible="{= ${AcuDetDetHdr>/AcuDetDet/results/length} > 0}"
                                            />
                                            <m:Select 
                                                visible="{= ${AcuDetDetHdr>/AcuDetDet/Paginated/results/length} > 0 }"
                                                change=".paginateValue(${$parameters>/selectedItem}, 'AcuDetDetHdr', '/AcuDetDet')">
                                                <m:items>
                                                    <core:Item key="10" text="10"/>
                                                    <core:Item key="20" text="20"/>
                                                    <core:Item key="50" text="50"/>
                                                    <core:Item key="100" text="100"/>
                                                </m:items>
                                            </m:Select>
                                        </m:OverflowToolbar>
                                    </m:headerToolbar>
                                    <m:columns>
                                        <m:Column width="auto" hAlign="Center" vAlign="Top" minScreenWidth="Phone" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                            <m:header>
                                                <m:Text text="{appTxts>/acuerdos.detConv}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:header>
                                            <m:footer>
                                                <m:Text text="Total" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:footer>
                                        </m:Column>
                                        <m:Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Phone" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                            <m:header>
                                                <m:Text text="{appTxts>/acuerdos.detCveMov}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:header>
                                        </m:Column>
                                        <m:Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Phone" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                            <m:header>
                                                <m:Text text="{appTxts>/acuerdos.detFolio}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:header>
                                        </m:Column>
                                        <m:Column width="auto" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                            <m:header>
                                                <m:Text text="{appTxts>/acuerdos.detFact}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:header>
                                        </m:Column>
                                        <m:Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                            <m:header>
                                                <m:Text text="{appTxts>/acuerdos.detTda}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:header>
                                        </m:Column>
                                        <m:Column width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                            <m:header>
                                                <m:Text text="{appTxts>/acuerdos.detComp}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:header>
                                            <m:footer>
                                                <m:ObjectNumber
                                                    number="{
                                                        parts:[{path:'acuTotDetDetModel>/TotCompra'},{path:'CurrencyCode'}],
                                                        type: 'sap.ui.model.type.Currency',
                                                        formatOptions: {showMeasure: false}
                                                            }"
                                                    unit="MXN" />
                                            </m:footer>
                                        </m:Column>
                                        <m:Column width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                            <m:header>
                                                <m:Text text="{appTxts>/acuerdos.detDesc}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:header>
                                            <m:footer>
                                                <m:ObjectNumber
                                                    number="{
                                                        parts:[{path:'acuTotDetDetModel>/TotDescto'},{path:'CurrencyCode'}],
                                                        type: 'sap.ui.model.type.Currency',
                                                        formatOptions: {showMeasure: false}
                                                            }"
                                                    unit="MXN" />
                                            </m:footer>
                                        </m:Column>
                                        <m:Column width="auto" hAlign="Right" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                            <m:header>
                                                <m:Text text="{appTxts>/acuerdos.detIVA}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:header>
                                            <m:footer>
                                                <m:ObjectNumber
                                                    number="{
                                                        parts:[{path:'acuTotDetDetModel>/TotIVA'},{path:'CurrencyCode'}],
                                                        type: 'sap.ui.model.type.Currency',
                                                        formatOptions: {showMeasure: false}
                                                            }"
                                                    unit="MXN" />
                                            </m:footer>
                                        </m:Column>
                                        <m:Column width="auto" hAlign="Left" vAlign="Top" minScreenWidth="Tablet" demandPopin="true" popinDisplay="Inline" mergeDuplicates="false">
                                            <m:header>
                                                <m:Text text="{appTxts>/acuerdos.detPDesc}" width="auto" maxLines="1" wrapping="false" textAlign="Begin" textDirection="Inherit"/>
                                            </m:header>
                                        </m:Column>
                                    </m:columns>
                                    <m:items>
                                        <m:ColumnListItem>                    
                                            <m:cells>
                                                <m:ObjectIdentifier 
                                                    title="{AcuDetDetHdr>Convenio}" 
                                                    titleActive="true"/>
                                                <m:Text text="{AcuDetDetHdr>CveMov}"/>
                                                <m:Text text="{AcuDetDetHdr>Folio}"/>
                                                <m:Text text="{AcuDetDetHdr>Factura}"/>
                                                <m:Text text="{AcuDetDetHdr>Tienda}"/>
                                                <m:ObjectNumber
                                                    number="{
                                                        parts:[{path:'AcuDetDetHdr>Compra'},{path:'CurrencyCode'}],
                                                        type: 'sap.ui.model.type.Currency',
                                                        formatOptions: {showMeasure: false}
                                                            }"
                                                    unit="MXN" />
                                                <m:ObjectNumber
                                                    number="{
                                                        parts:[{path:'AcuDetDetHdr>Descuento'},{path:'CurrencyCode'}],
                                                        type: 'sap.ui.model.type.Currency',
                                                        formatOptions: {showMeasure: false}
                                                            }"
                                                    unit="MXN" />
                                                <m:ObjectNumber
                                                    number="{
                                                        parts:[{path:'AcuDetDetHdr>IVA'},{path:'CurrencyCode'}],
                                                        type: 'sap.ui.model.type.Currency',
                                                        formatOptions: {showMeasure: false}
                                                            }"
                                                    unit="MXN" />
                                                <m:ObjectNumber
                                                    number="{AcuDetDetHdr>PDesc}"
                                                    unit="{AcuDetDetHdr>Unidad}"
                                                    state="Success" />
                                            </m:cells>
                                        </m:ColumnListItem>
                                    </m:items>
                                </m:Table>
                                <m:OverflowToolbar visible="{= ${AcuDetDetHdr>/AcuDetDet/Paginated/results/length} > 0 }">
                                    <m:Text text="{AcuDetDetHdr>/AcuDetDet/Paginated/initRow} - {AcuDetDetHdr>/AcuDetDet/Paginated/endRow} {appTxts>/pagination.of} {AcuDetDetHdr>/AcuDetDet/results/length}" />
                                    <m:ToolbarSpacer/>
                                    <m:Button type="Default" icon="sap-icon://slim-arrow-left" 
                                            press=".prevPagination(${AcuDetDetHdr>/AcuDetDet/Paginated/iterator}, ${AcuDetDetHdr>/AcuDetDet/Paginated/initRow}, 'AcuDetDetHdr', '/AcuDetDet')" 
                                            enabled="{= ${AcuDetDetHdr>/AcuDetDet/Paginated/iterator} !== 1}" />
                                    <m:Button type="Default" icon="sap-icon://slim-arrow-right" 
                                            press=".nextPagination(${AcuDetDetHdr>/AcuDetDet/Paginated/iterator}, ${AcuDetDetHdr>/AcuDetDet/Paginated/endRow}, 'AcuDetDetHdr', '/AcuDetDet')" 
                                            enabled="{= ${AcuDetDetHdr>/AcuDetDet/Paginated/endRow} !== ${AcuDetDetHdr>/AcuDetDet/results/length}}" />
                                </m:OverflowToolbar>
                            </m:VBox>
						</blocks>
					</ObjectPageSubSection>
				</subSections>
			</ObjectPageSection>
		</sections>
	</ObjectPageLayout>
</mvc:View>