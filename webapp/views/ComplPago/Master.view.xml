<mvc:View 
    displayBlock   = "true" 
    xmlns:f        = "sap.f" 
    xmlns:mvc      = "sap.ui.core.mvc"
    xmlns:fb       = "sap.ui.comp.filterbar" 
    xmlns:vm       = "sap.ui.comp.variants" 
    xmlns          = "sap.m" 
    xmlns:core     = "sap.ui.core"
    xmlns:t="sap.ui.table"
	controllerName = "demo.controllers.ComplPago.Master" 
    height         = "100%">

	<f:DynamicPage class="sapUiContentPadding">

        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle backgroundDesign="Transparent">
                <f:heading>
                    <vm:VariantManagement standardItemText="{appTxts>/pay.title}"></vm:VariantManagement>
                </f:heading>
                <f:actions>
                    <ToolbarSpacer/>
                    <Button
                        text  = "{appTxts>/pay.cfdi}"
                        type  = "Emphasized"
                        press = "openUploadDialog"
                    />
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>

        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <fb:FilterBar 
                        id                  = "filterBar"
                        header              = "Header"
		                reset               = "onReset" 
                        search              = "searchData" 
                        clear               = "onClear" 
                        cancel              = "onCancel" 
		                filtersDialogClosed = "onFiltersDialogClosed"
		                showRestoreButton   = "false" 
                        showClearButton     = "false" 
                        useToolbar          = "false">

                        <fb:filterGroupItems>

                            <fb:FilterGroupItem 
                                groupName    = "__$INTERNAL$" 
                                groupTitle   = "Group1" 
                                name         = "C" 
                                label        = "{appTxts>/pay.doc}" 
                                labelTooltip = "{appTxts>/pay.doc}"
                                visibleInFilterBar   = "true">
                                <fb:control>
                                    <Input id="documentTxt" placeholder="{appTxts>/pay.doc}"/>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem 
                                groupName            = "__$INTERNAL$"
                                name                 = "A"
                                label                = "{appTxts>/pay.date}" 
                                mandatory            = "true" 
                                partOfCurrentVariant = "true" 
                                visibleInFilterBar   = "true">
                                <fb:control>
                                    <DateRangeSelection id="dateRange" change="onChange" required="false"/>
                                </fb:control>
                            </fb:FilterGroupItem>
                            
                            <fb:FilterGroupItem 
                                groupName            = "__$INTERNAL$" 
                                name                 = "B" 
                                mandatory            = "true"
                                label                = "{appTxts>/pay.supplier}" 
                                labelTooltip         = "Tooltip Example" 
                                partOfCurrentVariant = "true" 
                                visibleInFilterBar   = "true">
                                <fb:control>
                                    <Input id="supplierInput" placeholder="{appTxts>/pay.supplier}" showSuggestion="true" valueHelpOnly="true" showValueHelp="true" valueHelpRequest=".onValueHelpRequest" value="{configSite>/supplierInput}">
                                    </Input>
                                </fb:control>
                            </fb:FilterGroupItem>
                        </fb:filterGroupItems>

	                </fb:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>

        <!-- DynamicPage Content -->
		<f:content>
            <VBox>
                <t:Table 
                    noData         ="{appTxts>/pay.merchandise}" 
                    id                 ="complPagoList"
                    alternateRowColors ="true" 
                    rows              ="{Documentos>/Detalles/Paginated/results}"
                    enableColumnReordering = "false"
                    enableSelectAll="true"
                    selectionMode="MultiToggle"
                    >
                    <t:extension>
                        <OverflowToolbar style="Clear">
                            <Title id="title" text="{appTxts>/pay.paylist}"/>
                            <ToolbarSpacer/>
                             <Button icon="sap-icon://download-from-cloud" text="{appTxts>/pay.Desmasiva}" press="generateFileMasivo" visible="{= ${Documentos>/Detalles/Paginated/results/length} > 0}" />
                            <Button icon="sap-icon://excel-attachment" text="{appTxts>/global.export}" press=".buildExportTable" visible="{= ${Documentos>/Detalles/Paginated/results/length} > 0}" />
                            <Select visible="{= ${Documentos>/Detalles/Paginated/results/length} > 0 }" change=".paginateValue(${$parameters>/selectedItem}, 'Documentos', '/Detalles')">
                                <items>
                                    <core:Item key="10" text="10"/>
                                    <core:Item key="20" text="20"/>
                                    <core:Item key="50" text="50"/>
                                    <core:Item key="100" text="100"/>
                                     <core:Item key="1000" text="1000"/>
                                </items>
                            </Select>
                              <Button icon="sap-icon://action-settings" press="ConfigTable" />
                        </OverflowToolbar>
                    </t:extension>
                    <t:columns>
                        <t:Column 
                            width           = "13%" 
                            hAlign          = "Left" id="column1" sortProperty="Butxt" filterProperty="Butxt">
                            <Label text="{appTxts>/pay.headerCompany}" />
                            <t:template>
                                <Text text="{Documentos>Butxt}" wrapping="false"/>
                            </t:template>
                        </t:Column>
                        <t:Column 
                            width  = "auto" id="column2" sortProperty="Text2" filterProperty="Text2">
                            <Label text="{appTxts>/pay.headerPaymentType}" />
                            <t:template>
                                <Text text="{Documentos>Text2}" wrapping="false"/>
                            </t:template>
                        </t:Column>
                        <t:Column 
                            width           = "15%" 
                            hAlign          = "Left" id="column3" sortProperty="Vblnr" filterProperty="Vblnr">
                            <Label text="{appTxts>/pay.headerDocument}" />
                            <t:template>
                                <ObjectIdentifier titlePress="onDocumentPress" titleActive="true" title="{Documentos>Vblnr}" wrapping="false"/>
                            </t:template>
                        </t:Column>
                        <t:Column 
                            width           = "5%" 
                            hAlign          = "Center" id="column4">
                            <Label text="{appTxts>/pay.headerFile}" />
                            <t:template>
                              <!--  <Button icon="sap-icon://document-text" type="Transparent" press="DescargarExcel" ></Button>-->
                               <Button icon="sap-icon://document-text" type="Transparent" press="generateFile" ></Button>
                            </t:template>
                        </t:Column>
                        <t:Column 
                            width           = "7%" 
                            hAlign          = "Center"  
                            id              = "column5"  sortProperty="Augdt" filterProperty="Augdt">
                            <Label text="{appTxts>/pay.headerLimitDate}" />
                            <t:template>
                                <Text text="{Documentos>Augdt}" wrapping="false"/>
                            </t:template>
                        </t:Column>
                        <t:Column
                            width           = "12%" 
                            hAlign          = "Center" 
                            id              = "column6" sortProperty="Rbetr" filterProperty="Rbetr">
                            <Label text="{appTxts>/pay.headerAmount}" />
                            <t:template>
                                <ObjectNumber
                                        number="{parts: [{path: 'Documentos>Rbetr'}, {path: 'Documentos>Waers'}], type:'sap.ui.model.type.Currency', formatOptions: {showMeasure:false}}" unit="{Documentos>Waers}" emphasized="false" state="None" textAlign="Right"/>
                            </t:template>
                        </t:Column>
                               <t:Column 
                            width           = "5%" 
                            hAlign          = "Center" 
                            id              = "column65" sortProperty="Nc_mc" filterProperty="Nc_mc">
                            <Label text="{appTxts>/pay.headerNCMC}" />
                            	
                            <t:template>
                                <core:Icon src="{
								path: 'Documentos>Nc_mc',
								formatter: '.formatAvailableToIcon'
							}" color="{
								path: 'Documentos>Nc_mc',
								formatter: '.formatStatusIcon'
							}"/>

                            </t:template>
                        </t:Column>
                        <t:Column 
                            width           = "5%" 
                            hAlign          = "Center" 
                            id              = "column7" sortProperty="Nc" filterProperty="Nc">
                            <Label text="{appTxts>/pay.headerNC}" />
                            	
                            <t:template>
                                <core:Icon src="{
								path: 'Documentos>Nc',
								formatter: '.formatAvailableToIcon'
							}" color="{
								path: 'Documentos>Nc',
								formatter: '.formatStatusIcon'
							}"/>

                            </t:template>
                        </t:Column> 
                    
                        <t:Column 
                            width           = "5%" 
                            hAlign          = "Center" 
                            id              = "column8" sortProperty="Cp03" filterProperty="Cp03">
                            <Label text="{appTxts>/pay.headerCP} 03" />
                            <t:template>
                                
                                <core:Icon src="{
								path: 'Documentos>Cp03',
								formatter: '.formatAvailableToIcon'
							}" color="{
								path: 'Documentos>Cp03',
								formatter: '.formatStatusIcon'
							}"/>
                            </t:template>
                        </t:Column>
                        <t:Column 
                            width           = "5%" 
                            hAlign          = "Center" 
                            id              = "column9" sortProperty="Cp17s" filterProperty="Cp17s">
                            <Label text="{appTxts>/pay.headerCP} 17S" />
                            <t:template>
                                
                                 <core:Icon src="{
								path: 'Documentos>Cp17s',
								formatter: '.formatAvailableToIcon'
							}" color="{
								path: 'Documentos>Cp17s',
								formatter: '.formatStatusIcon'
							}"/>
                            </t:template>
                        </t:Column>
                        <t:Column 
                            width           = "5%" 
                            hAlign          = "Center" 
                            id              = "column10" sortProperty="Cp17r" filterProperty="Cp17r">
                            <Label text="{appTxts>/pay.headerCP} 17R" />
                            <t:template>
                                                             <core:Icon src="{
								path: 'Documentos>Cp17r',
								formatter: '.formatAvailableToIcon'
							}" color="{
								path: 'Documentos>Cp17r',
								formatter: '.formatStatusIcon'
							}"/>


                            </t:template>
                        </t:Column>
                        <t:Column 
                            width           = "5%" 
                            hAlign          = "Center" 
                            id              = "column11" sortProperty="Rzawe" filterProperty="Rzawe">
                            <Label text="{appTxts>/pay.headerEstatus}" />
                            <t:template>
                                <Text text="{Documentos>Rzawe}" wrapping="false"/>
                            </t:template>
                        </t:Column>
                    </t:columns>
                </t:Table>
                <OverflowToolbar visible="{= ${Documentos>/Detalles/Paginated/results/length} > 0 }">
                    <Text text="{Documentos>/Detalles/Paginated/initRow} - {Documentos>/Detalles/Paginated/endRow} {appTxts>/pagination.of} {Documentos>/Detalles/results/length}" />
                    <ToolbarSpacer/>
                    <Button type="Default" icon="sap-icon://slim-arrow-left" press=".prevPagination(${Documentos>/Detalles/Paginated/iterator}, ${Documentos>/Detalles/Paginated/initRow}, 'Documentos', '/Detalles')" enabled="{= ${Documentos>/Detalles/Paginated/iterator} !== 1}" />
                    <Button type="Default" icon="sap-icon://slim-arrow-right" press=".nextPagination(${Documentos>/Detalles/Paginated/iterator}, ${Documentos>/Detalles/Paginated/endRow}, 'Documentos', '/Detalles')" enabled="{= ${Documentos>/Detalles/Paginated/endRow} !== ${Documentos>/Detalles/results/length}}" />
                </OverflowToolbar>
            </VBox>
		</f:content>
	</f:DynamicPage>
</mvc:View>