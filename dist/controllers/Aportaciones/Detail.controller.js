sap.ui.define(["sap/ui/model/json/JSONModel","demo/controllers/BaseController","sap/ui/core/mvc/Controller","sap/m/MessageToast","jquery.sap.global","demo/models/BaseModel"],function(e,t,o,n,i){"use strict";var a=new this.Aportaciones;return t.extend("demo.controllers.Aportaciones.Detail",{onInit:function(){var e=this.getView().byId("exitFullScreenBtn"),t=this.getView().byId("enterFullScreenBtn");this.oRouter=this.getOwnerComponent().getRouter();this.oModel=this.getOwnerComponent().getModel();this.oRouter.getRoute("detailAportaciones").attachPatternMatched(this._onDocumentMatched,this);[e,t].forEach(function(e){e.addEventDelegate({onAfterRendering:function(){if(this.bFocusFullScreenButton){this.bFocusFullScreenButton=false;e.focus()}}.bind(this)})},this)},handleItemPress:function(e){},handleFullScreen:function(){this.bFocusFullScreenButton=true;var e=this.oModel.getProperty("/actionButtonsInfo/midColumn/fullScreen");this.oRouter.navTo("detailAportaciones",{layout:e,folio:this._folio,concepto:this._concepto,gerencia:this._gerencia,importe:this._importe})},handleExitFullScreen:function(){this.bFocusFullScreenButton=true;var e=this.oModel.getProperty("/actionButtonsInfo/midColumn/exitFullScreen");this.oRouter.navTo("detailAportaciones",{layout:e,folio:this._folio,concepto:this._concepto,gerencia:this._gerencia,importe:this._importe})},handleClose:function(){var e=this.oModel.getProperty("/actionButtonsInfo/midColumn/closeColumn");this.oRouter.navTo("masterAportaciones",{layout:e})},_onDocumentMatched:function(t){this._folio=t.getParameter("arguments").folio||this._folio||"0";this._concepto=t.getParameter("arguments").concepto||this._concepto||"0";this._gerencia=t.getParameter("arguments").gerencia||this._gerencia||"0";this._importe=t.getParameter("arguments").importe||this._importe||"0";var o={Folio:this._folio,Concepto:this._concepto,Gerencia:this._gerencia,Importe:this._importe};this.getOwnerComponent().setModel(new e(o),"aportaDetModel");var n="AportaSet?$expand=AportaDetalle&$filter=IOption eq '4'";if(this._folio!=""&&this._folio!=null){n+=" and IFolio eq '"+this._folio+"'"}this.getView().byId("aportaDetTable").setBusy(true);a.getJsonModelAsync(n,function(e,t){var o=e.getProperty("/results/0");if(o!=null){t.getOwnerComponent().setModel(new sap.ui.model.json.JSONModel(o),"AportacionesDet")}t.getView().byId("aportaDetTable").setBusy(false)},function(e){e.getView().byId("aportaDetTable").setBusy(false)},this)},buildExportTable:function(){var e=this.getOwnerComponent().getModel("appTxts");var t=[{name:e.getProperty("/aportaciones.un"),template:{content:"{Werks}"}},{name:e.getProperty("/aportaciones.tienda"),template:{content:"{Namew}"}},{name:e.getProperty("/aportaciones.sku"),template:{content:"{Matnr}"}},{name:e.getProperty("/aportaciones.articulo"),template:{content:"{Maktx}"}},{name:e.getProperty("/aportaciones.piezas"),template:{content:"{Zcantidad}"}},{name:e.getProperty("/aportaciones.bonif"),template:{content:"{Zbonificacion}"}},{name:e.getProperty("/aportaciones.iva"),template:{content:"{Ziva}"}},{name:e.getProperty("/aportaciones.ieps"),template:{content:"{Zieps}"}},{name:e.getProperty("/aportaciones.total"),template:{content:"{Ztotal}"}},{name:e.getProperty("/aportaciones.aporta"),template:{content:"{Zaportacion}"}}];this.exportxls("AportacionesDet","/AportaDetalle/results",t)},handleReceipt:function(){this.oRouter.navTo("detailDetailAporta",{layout:sap.f.LayoutType.ThreeColumnsEndExpanded,folio:this._folio,concepto:this._concepto,gerencia:this._gerencia,importe:this._importe})}})});