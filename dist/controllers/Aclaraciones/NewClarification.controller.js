sap.ui.define(["sap/ui/model/json/JSONModel","demo/controllers/BaseController","sap/ui/core/mvc/Controller"],function(e,t){"use strict";return t.extend("demo.controllers.Aclaraciones.NewClarification",{onInit:function(){this.oRouter=this.getOwnerComponent().getRouter()},handleItemPress:function(e){var t=this.getOwnerComponent().getHelper().getNextUIState(2),n=e.getSource().getBindingContext("tableItemsCfdi").getPath(),o=n.split("/").slice(-1).pop()},handleFullScreen:function(){this.bFocusFullScreenButton=true;var e=this.oModel.getProperty("/actionButtonsInfo/midColumn/fullScreen");this.oRouter.navTo("detailCfdi",{layout:e,document:this._document,year:this._year})},handleExitFullScreen:function(){this.bFocusFullScreenButton=true;var e=this.oModel.getProperty("/actionButtonsInfo/midColumn/exitFullScreen");this.oRouter.navTo("detailCfdi",{layout:e,document:this._document,year:this._year})},handleClose:function(){var e=this.oModel.getProperty("/actionButtonsInfo/midColumn/closeColumn");this.oRouter.navTo("masterCfdi",{layout:e})},_onDocumentMatched:function(t){this._document=t.getParameter("arguments").document||this._document||"0";this._year=t.getParameter("arguments").year||this._year||"0";var n="/HeaderCFDISet?$expand=EDOCDTLNAV,EDOCHDRNAV&$filter=IOption eq '2' and IBelnr eq '"+this._document+"' and IPeriodo eq '"+this._year+"'";var o=oModel.getJsonModel(n);var r=o.getProperty("/results/0");this.getOwnerComponent().setModel(new e(r),"tableDetailMoves");this.paginate("tableDetailMoves","/EDOCDTLNAV",1,0)},getOrder:function(e){var t=e.getSource().getProperty("text");var n=this.getOwnerComponent().getHelper().getNextUIState(3);this.oRouter.navTo("detailOrders",{layout:n.layout,document:t})},buildExcel:function(){var e=this.getOwnerComponent().getModel("appTxts");let t=this.getOwnerComponent().getModel("tableDetailMoves");var n=[{name:e.getProperty("/sendInv.recepNumberUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Xblnr")}},{name:e.getProperty("/sendInv.documentUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Belnr")+" - "+t.getProperty("/EDOCHDRNAV/results/0/Gjahr")}},{name:e.getProperty("/sendInv.purchaseOrderUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Ebeln")}},{name:e.getProperty("/sendInv.amountUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Dmbtr")}},{name:e.getProperty("/sendInv.referenceUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Bktxt")}},{name:e.getProperty("/sendInv.dateUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Budat")}},{name:e.getProperty("/sendInv.taxUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Impuesto")}},{name:e.getProperty("/sendInv.vendorUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Sociedad")}},{name:e.getProperty("/sendInv.branchUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Werks")}},{name:e.getProperty("/sendInv.totalUPC"),template:{content:t.getProperty("/EDOCHDRNAV/results/0/Total")}},{name:e.getProperty("/sendInv.positionUPC"),template:{content:"{Ebelp}"}},{name:e.getProperty("/sendInv.barcodeUPC"),template:{content:"{Ean11}"}},{name:e.getProperty("/sendInv.descriptionUPC"),template:{content:"{Txz01}"}},{name:e.getProperty("/sendInv.qtyUPC"),template:{content:"{Bpmng} {Bprme}"}},{name:e.getProperty("/sendInv.unitPriceUPC"),template:{content:"{Unitp}"}},{name:e.getProperty("/sendInv.positionAmountUPC"),template:{content:"{Dmbtr}"}},{name:e.getProperty("/sendInv.packCapUPC"),template:{content:"{Emp_cap}"}},{name:e.getProperty("/sendInv.storeUPC"),template:{content:"{Werks}-{Centro}"}}];this.exportxls("tableDetailMoves","/EDOCDTLNAV/results",n)},onCancel:function(){console.log("entro");this.goToMainAclaraciones()},goToMainAclaraciones:function(){this.oRouter.navTo("Aclaraciones");this.clearFields()}})});