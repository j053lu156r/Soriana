sap.ui.define(["sap/ui/model/json/JSONModel","demo/controllers/BaseController","sap/ui/core/mvc/Controller"],function(e,t){"use strict";var o=new this.Devoluciones;return t.extend("demo.controllers.Devoluciones.Detail",{onInit:function(){var e=this.getView().byId("exitFullScreenBtn"),t=this.getView().byId("enterFullScreenBtn");this.oRouter=this.getOwnerComponent().getRouter();this.oModel=this.getOwnerComponent().getModel();this.oRouter.getRoute("detailDevo").attachPatternMatched(this._onDocumentMatched,this);[e,t].forEach(function(e){e.addEventDelegate({onAfterRendering:function(){if(this.bFocusFullScreenButton){this.bFocusFullScreenButton=false;e.focus()}}.bind(this)})},this)},formatSatusDevo:function(e){if(e){return"true"}else{return"false"}},handleItemPress:function(t){var o=this.getOwnerComponent().getHelper().getNextUIState(2),n=t.getSource().getBindingContext("tableDetailDevo").getPath();var r=this.getOwnerComponent().getModel("tableDetailDevo").getProperty(n);if(!this._oDialog||this.oDialog===undefined){this._oDialog=sap.ui.xmlfragment("demo.fragments.Exhaustion",this)}this.getView().addDependent(this._oDialog);jQuery.sap.syncStyleClass("sapUiSizeCompact",this.getView(),this._oDialog);this._oDialog.setModel(new e(r));this._oDialog.open()},handleFullScreen:function(){this.bFocusFullScreenButton=true;var e=this.oModel.getProperty("/actionButtonsInfo/midColumn/fullScreen");this.oRouter.navTo("detailDevo",{layout:e,xblnr:this._Xblnr,lifnr:this._lifnr,ebeln:this._Ebeln,suc:this._Werks})},handleExitFullScreen:function(){this.bFocusFullScreenButton=true;var e=this.oModel.getProperty("/actionButtonsInfo/midColumn/exitFullScreen");this.oRouter.navTo("detailDevo",{layout:e,xblnr:this._Xblnr,lifnr:this._lifnr,ebeln:this._Ebeln,suc:this._Werks})},handleClose:function(){var e=this.oModel.getProperty("/actionButtonsInfo/midColumn/closeColumn");this.oRouter.navTo("masterDevoluciones",{layout:e})},_onDocumentMatched:function(t){this._Xblnr=t.getParameter("arguments").xblnr||this._Xblnr||"0",this._lifnr=t.getParameter("arguments").lifnr||this._lifnr||"0";this._Ebeln=t.getParameter("arguments").ebeln||this._Ebeln||"0";this._Werks=t.getParameter("arguments").suc||this._Suc||"0";var n={Xblnr:this._Xblnr,Werks:this._Werks};this.getOwnerComponent().setModel(new e(n),"headerDetail");var r="/HrdReturnsSet?$expand=ETDTDEVNAV,ETFDEVNAV,ITDFAGR&$filter= IOption eq '3' and IEbeln eq '"+this._Ebeln+"'"+" and ILifnr eq '"+this._lifnr+"' and IXblnr eq '"+this._Xblnr+"' and IWerks eq '"+this._Werks+"'";var l=o.getJsonModel(r);var s=l.getProperty("/results/0");this.getOwnerComponent().setModel(new e(s),"devoDetail");this.paginate("devoDetail","/ETDTDEVNAV",1,0);console.log(l)},onCloseDialog:function(){if(this._oDialog){this._oDialog.destroy();this._oDialog=null}},onExit:function(){this.onCloseDialog()},buildExcel:function(){var e=this.getOwnerComponent().getModel("appTxts");let t=this.getOwnerComponent().getModel("devoDetail");var o=[{name:e.getProperty("/devo.folioDevo"),template:{content:"{Xblnr}"}},{name:e.getProperty("/devo.fechaDevo"),template:{content:t.getProperty("/ETFDEVNAV/results/0/Budat")}},{name:e.getProperty("/devo.sucursal"),template:{content:t.getProperty("/ETFDEVNAV/results/0/Werks")}},{name:e.getProperty("/devo.sucursal"),template:{content:t.getProperty("/ETFDEVNAV/results/0/Nwerks")}},{name:e.getProperty("/devo.status"),template:{content:t.getProperty("/ETFDEVNAV/results/0/Zstatusdev")}},{name:e.getProperty("/devo.amount"),template:{content:"{/EMtotal}"}},{name:e.getProperty("/devo.Code"),template:{content:t.getProperty("/ETFDEVNAV/results/0/Zfolagrup")}},{name:e.getProperty("/devo.folioFedex"),template:{content:t.getProperty("/ETFDEVNAV/results/0/Zfolfedex")}},{name:e.getProperty("/devo.fechacode"),template:{content:t.getProperty("/ETFDEVNAV/results/0/Zfechreg")}},{name:e.getProperty("/devo.fechaentrega"),template:{content:t.getProperty("/ETFDEVNAV/results/0/Zfechent")}},{name:e.getProperty("/devo.beforeto"),template:{content:t.getProperty("/ETFDEVNAV/results/0/Flimrec")}},{name:e.getProperty("/devo.item"),template:{content:"{Ebelp}"}},{name:e.getProperty("/devo.codigo"),template:{content:"{Ean11}"}},{name:e.getProperty("/devo.descr"),template:{content:"{Txz01}"}},{name:e.getProperty("/devo.qty"),template:{content:"{Menge}"}},{name:e.getProperty("/devo.umb"),template:{content:"{Meins}"}},{name:e.getProperty("/devo.uprice"),template:{content:"{Netpr}"}},{name:e.getProperty("/devo.total"),template:{content:"{Brtwr}"}}];this.exportxls("devoDetail","/ETDTDEVNAV/results",o)}})});