sap.ui.define(["sap/ui/model/json/JSONModel","demo/controllers/BaseController","sap/ui/core/mvc/Controller"],function(t,e){"use strict";var n=new this.FacSoriana;return e.extend("demo.controllers.FacSoriana.Detail",{onInit:function(){var t=this.getView().byId("exitFullScreenBtn"),e=this.getView().byId("enterFullScreenBtn");this.oRouter=this.getOwnerComponent().getRouter();this.oModel=this.getOwnerComponent().getModel();this.oRouter.getRoute("detailFacSoriana").attachPatternMatched(this._onDocumentMatched,this);[t,e].forEach(function(t){t.addEventDelegate({onAfterRendering:function(){if(this.bFocusFullScreenButton){this.bFocusFullScreenButton=false;t.focus()}}.bind(this)})},this)},handleItemPress:function(e){var n=this.getOwnerComponent().getHelper().getNextUIState(2),o=e.getSource().getBindingContext("tableDetailMoves").getPath();var a=this.getOwnerComponent().getModel("tableDetailMoves").getProperty(o);if(!this._oDialog||this.oDialog===undefined){this._oDialog=sap.ui.xmlfragment("demo.fragments.Exhaustion",this)}this.getView().addDependent(this._oDialog);jQuery.sap.syncStyleClass("sapUiSizeCompact",this.getView(),this._oDialog);this._oDialog.setModel(new t(a));this._oDialog.open()},handleFullScreen:function(){this.bFocusFullScreenButton=true;var t=this.oModel.getProperty("/actionButtonsInfo/midColumn/fullScreen");this.oRouter.navTo("detailFacSoriana",{layout:t,document:this._document,budat:this._budat,zconfact:this._zconfact,lifnr:this._lifnr,bukrs:this._bukrs})},handleExitFullScreen:function(){this.bFocusFullScreenButton=true;var t=this.oModel.getProperty("/actionButtonsInfo/midColumn/exitFullScreen");this.oRouter.navTo("detailFacSoriana",{layout:t,document:this._document,budat:this._budat,zconfact:this._zconfact,lifnr:this._lifnr,bukrs:this._bukrs})},handleClose:function(){var t=this.oModel.getProperty("/actionButtonsInfo/midColumn/closeColumn");this.oRouter.navTo("masterFacSoriana",{layout:t})},_onDocumentMatched:function(e){this._document=e.getParameter("arguments").document||this._document||"0",this._budat=e.getParameter("arguments").budat||this._budat||"0",this._zconfact=e.getParameter("arguments").zconfact||this._zconfact||"0",this._lifnr=e.getParameter("arguments").lifnr||this._lifnr||"0";this._bukrs=e.getParameter("arguments").bukrs||this._bukrs||"0";this._budat=this._budat.replaceAll("-","");var o="/headSorInvSet?$expand=ETAGDOCNAV,ETDCTDTNAV,ETPMTDCNAV&$filter= IOption eq '2' and ILifnr eq '"+this._lifnr+"'"+" and IDocnum eq '"+this._document+"'"+" and IBudat eq '"+this._budat+"'"+" and IZbukrs eq '"+this._bukrs+"'";var a=n.getJsonModel(o);var r=a.getProperty("/results/0");this.getOwnerComponent().setModel(new t(r),"facSorianaHdr");if(r!=null){o="/headSorInvSet?$expand=ETAGDOCNAV,ETDCTDTNAV,ETPMTDCNAV&$filter= IOption eq '3' and ILifnr eq '"+this._lifnr+"'"+" and IDocnum eq '"+this._document+"'"+" and IZbukrs eq '"+this._bukrs+"'"+" and ILaufi eq '"+r.Espmthd.Laufi+"'"+" and ILaufd eq '"+r.Espmthd.Laufd+"'";var i=n.getJsonModel(o);var s=i.getProperty("/results/0");this.getOwnerComponent().setModel(new t(s),"facSorianaDocs");this.paginate("facSorianaDocs","/ETDCTDTNAV",1,0);this.paginate("facSorianaHdr","/ETAGDOCNAV",1,0);console.log(i);console.log(a)}},formatDesc:function(t,e,n){var o="";if(t!=""&&t!=null){o=t}else{o=n}return o},formatTotal:function(t,e,n){var o="";if(t!=0&&t!=null){o=t}else{o=n}return o},onCloseDialog:function(){if(this._oDialog){this._oDialog.destroy();this._oDialog=null}},onExit:function(){this.onCloseDialog()},buildExcel:function(){var t=this.getOwnerComponent().getModel("appTxts");let e=this.getOwnerComponent().getModel("facSorianaHdr");var n=[{name:t.getProperty("/fs.docno"),template:{content:e.getProperty("/Espmthd/Vblnr")}},{name:t.getProperty("/fs.Fechapago"),template:{content:e.getProperty("/Espmthd/Laufd")}},{name:t.getProperty("/global.year"),template:{content:e.getProperty("/Espmthd/Zyaldt")}},{name:t.getProperty("/fs.total"),template:{content:e.getProperty("/EZtotimp")}},{name:t.getProperty("/global.company"),template:{content:e.getProperty("/Espmthd/Zbukr")}},{name:t.getProperty("/recipient.supplier"),template:{content:e.getProperty("/Espmthd/Lifnr")}},{name:t.getProperty("/recipient.supplier"),template:{content:e.getProperty("/Espmthd/Pname")}},{name:t.getProperty("/fs.documento"),template:{content:"{Belnr}"}},{name:t.getProperty("/fs.descrip"),template:{content:"{Ltext}"}},{name:t.getProperty("/fs.Fechapago"),template:{content:"{Budat}"}},{name:t.getProperty("/fs.amount"),template:{content:"{Dmbtr}"}},{name:t.getProperty("/fs.foliofact"),template:{content:"{FolfacRef}"}},{name:t.getProperty("/fs.uuid"),template:{content:"{CveUuid}"}}];this.exportxls("facSorianaDocs","/ETDCTDTNAV/results",n)}})});