<core:FragmentDefinition
	xmlns="sap.m"
    xmlns:c="sap.suite.ui.commons"
	xmlns:core="sap.ui.core">
	<Popover
		id="myPopover"
		class="sapUiResponsivePadding--header sapUiResponsivePadding--footer sapUiContentPadding"
		placement="Top"
        showHeader="true"
        modal="false"
        showArrow="true"
        contentHeight="50%"
        verticalScrolling="false"
        title="{appTxts>/chatbot.title}"
        >
        <content>
            <c:Timeline
                    id="idTimeline"
                    enableDoubleSided="false"
                    alignment="Top"
                    axisOrientation="Vertical"
                    growingThreshold="0"
                    showHeaderBar ="false"
                    noDataText="Sin datos"
                    content="{cBot>/ETCBCTRLNAV/results}">
                <c:content>
                    <c:TimelineItem
                            id="idTemplateItem"
                            userNameClickable="false"
                            text="{cBot>message}"
                            userName="Chatito"
                            status="Success"
                            icon="sap-icon://headset">
                            <c:embeddedControl>
                                <VBox>
                                    <Text
                                        text="{cBot>message}"
                                        class="sapUiTinyMargin"/>
                                    <List
                                        id="helpDocsList"
                                        mode="None"
                                        items="{
                                                path: 'cBot>options', templateShareable:false
                                            }"
                                        visible="{= ${cBot>options/length} > 0 }"
                                        >
                                        <CustomListItem>
                                            <Link text="{cBot>name}" visible="{path: 'cBot>resource', formatter: '.hasOptionVisible' }" class="sapUiTinyMargin"
                                            press="getNextChatResponse" />
                                    </CustomListItem>
                                        </List>
                                </VBox>
                            </c:embeddedControl>
                    </c:TimelineItem>
                </c:content>
            </c:Timeline>
        </content>
        <footer>
            <OverflowToolbar style="Clear">
                <ToolbarSpacer/>
                <Button text="{appTxts>/chatbot.back}"
                enabled="{= ${cBot>/ETCBCTRLNAV/results/0/level} !== '01' }"
                press="getBackChatResponse(${cBot>/ETCBCTRLNAV/results/0/rLevel}, ${cBot>/ETCBCTRLNAV/results/0/rOption})" />
                <Button text="{appTxts>/chatbot.mainmenu}" press="initialChatBot"
                enabled="{= ${cBot>/ETCBCTRLNAV/results/0/level} !== '01' }" />
            </OverflowToolbar>
        </footer>
	</Popover>
</core:FragmentDefinition>
